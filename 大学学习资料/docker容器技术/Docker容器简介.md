# Docker容器简介

> 本文作者：[明凡]()
>
> 站长：[明凡]()
>
> 本站地址：[https://mingfancloud.cn](https://mingfancloud.cn)

## 1.容器介绍

容器其实是一种沙盒技术。沙盒就是能够像一个集装箱一样，把你的应用"装"起来的技术。  

这样，应用与应用之间，就因为有了边界而不至于相互干扰；而被装进集装箱的应用，也可以被方便地搬来搬去。  

问题：容器的本质到底是什么？容器的本质是进程。容器镜像就是这个系统里的".exe"安装包。  

## 2.Docker介绍

[Docker 教程 | 菜鸟教程](https://www.runoob.com/docker/docker-tutorial.html)

Docker是Docker.Inc公司开源的一个基于轻量级虚拟化技术的容器引擎项目，整个项目基于Go语言开发，并遵从Apache 2.0协议。通过分层镜像标准化和内核虚拟化技术，Docker使得应用开发者和运维工程师可以以统一的方式跨平台发布应用，并且以几乎没有额外开销的情况下提供资源隔离的应用运行环境。  

Docker 是一个开源工具，它可以让创建和管理 docker 容器变得简单。容器就像是轻量级的虚拟机，并且可以以秒级的速度来启动或停止。Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。  

容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app），更重要的是容器性能开销极低。  

没有容器的时候：  
`开发 测试  运维`

1）RD开发产品（需要配置开发环境）LAMP  
2）QA测试(需要配置测试环境)  
3）OP上线（需要线上环境）  

有容器之后：一次构建多次发布

1）RD开发产品（需要在docker容器里配置开发环境）  
2）把容器打包成镜像交给运维，运维上线   

Docker跟原有的工具区别：

传统的部署模式是：安装(包管理工具或者源码包编译)->配置->运行；  
Docker的部署模式是：复制->运行。  

Docker对服务器端开发/部署带来的变化：

方便快速部署，对于部署来说可以极大的减少部署的时间成本和人力成本  
Docker支持将应用打包进一个可以移植的容器中，重新定义了应用开发，测试，部署上线的过程，核心理念是Build once，Run anywhere

Docker 优势：

1、交付物标准化：Docker的标准化交付物称为"镜像"，它包含了应用程序及其所依赖的运行环境，大大简化了应用交付的模式。  
2、应用隔离：Docker可以隔离不同应用程序之间的相互影响，但是比虚拟机开销更小。总之，容器技术部署速度快，开发、测试更敏捷；提高系统利用率，降低资源成本.  
3、一次构建，多次交付：类似于集装箱的"一次装箱，多次运输"，Docker镜像可以做到"一次构建，多次交付"。  

Docker的度量：

Docker是利用容器来实现的一种轻量级的虚拟技术，从而在保证隔离性的同时达到节省资源的目的。 
Docker的可移植性可以让它一次建立，到处运行。Docker的度量可以从以下四个方面进行：  

1）隔离性：通过内核的命名空间来实现的，将容器的进程、网络、消息、文件系统和主机名进行隔离。  
2）可度量性：Docker主要通过cgroups控制组来控制资源的度量和分配。  
3）移植性：Docker利用AUFS来实现对容器的快速更新。AUFS是一种支持将不同目录挂载到同一个虚拟文件系统下的文件系统，支持对每个目录的读写权限管理。AUFS具有层的概念，每一次修改都是在已有的只写层进行增量修改，修改的内容将形成新的文件层，不影响原有的层。  
4）安全性：安全性可以分为容器内部之间的安全性；容器与托管主机之间的安全性。容器内部之间的安全性主要是通过命名空间和cgroups来保证的。容器与托管主机之间的安全性主要是通过内核能力机制的控制，可以防止Docker非法入侵托管主机。  

Docker容器使用AUFS作为文件系统，有如下优势：

1）节省存储空间：多个容器可以共享同一个基础镜像存储。  
2）快速部署  
3）升级方便：升级一个基础镜像即可影响到所有基于它的容器。需要注意已经在运行的docker容器不受影响。  

容器和 VM 的主要区别：

表面区别：容器占用体积小，虚拟机占用体积大。  
隔离性：容器提供了基于进程的隔离，而虚拟机提供了资源的完全隔离。  
启动速度：虚拟机可能需要一分钟来启动，而容器只需要一秒钟或更短。容器使用宿主操作系统的内核，而虚拟机使用独立的内核。Docker 的局限性之一是，它只能用在64位的操作系统上。  
本质区别：容器是被隔离的进程。  

